Septembar 2024. Copyright 2018-2024 by Dragan Milićev
❖ Konstruktor premeštanja poziva se kada se objekat inicijalizuje izrazom koji predstavlja dvrednost, a
takav je privremeni objekat, pod uslovom da prevodilac ne izostavlja kopiranje:
string s = s1 + s2;
void f (string);
f(s1+s2);
❖ Osim toga, kao specijalan slučaj, konstruktor premeštanja se poziva i kada se povratna vrednost funkcije
inicijalizuje imenovanim objektom sa automatskim trajanjem skladišta, ovaj put uključujući i formalni
parametar, opet osim ako prevodilac ne vrši NRVO:
inline string substr (size_t pos, size_t count) const {
  …
  string s;
  …
  return s;
}
❖ Ukoliko klasa nema konstruktor premeštanja, u ovakvim slučajevima pozivaće se konstruktor kopije, pa
postojanje konstruktora premeštanja ne treba da menja semantiku programa: konstruktor premeštanja
može da popravi performanse i smanji količinu kopiranja resursa, ali pošto njegova aktivacija nije uvek
određena (u slučajevima opcionih izbegavanja kopiranja), logika programa ne sme da zavisi od
njegovog ponašanja
❖ Slično važi i za operator dodele premeštanjem: poziva se kada je desni operand dvrednost
UNIT NAME: Premeštanje resursa
 378
Ukoliko se ne izostavlja kopiranje, pozvaće se konstruktor premeštanja sa
argumentom koji je rezultat izraza s1+s2
Ukoliko se ne izostavlja kopiranje, pozvaće se konstruktor premeštanja
kojim se inicijalizuje parametar funkcije rezultatom izraza s1+s2
Ukoliko se ne vrši NRVO, poziva se konstruktor premeštanja koji inicijalizuje
privremeni objekat koji prihvata rezultat poziva funkcije sa argumentom s

